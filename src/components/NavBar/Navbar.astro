---
import { Download } from "../../icons/Platforms";
import { appName } from "../../utils/constants";
import { getI18N } from "../i18n"
import SelectI18n from "../i18n/SelectI18n.astro";
import { getLangFromUrl, useTranslatedPath, useTranslations } from "../i18n/utils";
const { currentLocale } = Astro
const i18n = getI18N({ currentLocale })

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
const translatePath = useTranslatedPath(lang);

const navbarLinks = [
  {
    name: `${i18n.navBar.home}`,
    href: "/",
  },
  {
    name: `${i18n.navBar.documentation}`,
    href: "/docs",
  },
  {
    name: `${i18n.navBar.licence}`,
    href: "#",
  },
  {
    name: `${i18n.navBar.contact}`,
    href: "#",
  },
];
---
<nav
  class="navbar top-0 w-full h-28 flex flex-col justify-center items-center fixed bg-customDarkBg1 lg:bg-customDarkBgTransparent z-40 lg:backdrop-blur-xl"
>
  <div
    class="2xl:w-[1280px] xl:w-10/12 w-11/12 flex justify-around items-center relative"
  >
    <a class="navbar-link flex h-full items-center" href={translatePath('/')}>
      <img src="/icon-played.png" alt="played logo" class="w-8 h-8 mr-4" />
      <h1>{appName}</h1>
    </a>
    <div class="flex h-full">
      {
        navbarLinks.map(({ name, href }) => {
          return (
            <a aria-label={name} href={translatePath(href)} class="navbar-link">
              {name}
            </a>
          );
        })
      }
      <SelectI18n />
      <button
        class="flex items-center bg-green-600 p-1 rounded-md hover:scale-105 transition-transform"
      >
        <div class="px-1">
          <Download />
        </div>
        <span><strong>{i18n.download}</strong></span>
      </button>
    </div>
  </div>
</nav>
<style>
  nav {
    position: sticky;
    top: 0px;
    animation: adjust-header linear both;
    animation-timeline: scroll();
    animation-range: 0 400px;
  }

  @keyframes adjust-header {
    to {
      background: rgba(0, 0, 0, 0.3);
      backdrop-filter: blur(10px);
      font-size: 12px;
      height: 60px;
      /* @apply border-b-2 border-gray-800; */
    }
  }
  .navbar-link {
    @apply text-white lg:text-base text-2xl  leading-6 mr-4 ml-4   2xl:mr-6 2xl:ml-6 cursor-pointer font-normal lg:font-medium hover:scale-110 transition duration-300 h-full pt-2;
  }
</style>
